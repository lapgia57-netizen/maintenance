<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Troll Image Generator - Siêu lầy lội</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #1e1e2f, #2a2a40);
    color: #f0f0f0;
    min-height: 100vh;
    padding: 20px;
  }

  .container {
    max-width: 1100px;
    margin: 0 auto;
  }

  h1 {
    text-align: center;
    margin: 20px 0 40px;
    font-size: 2.6rem;
    color: #ff6b6b;
    text-shadow: 0 0 15px rgba(255,107,107,0.5);
  }

  .editor {
    display: grid;
    grid-template-columns: 320px 1fr;
    gap: 30px;
    background: rgba(40,40,60,0.7);
    backdrop-filter: blur(10px);
    padding: 30px;
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
  }

  .controls {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .control-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  label {
    font-weight: 600;
    color: #a0d2ff;
  }

  select, input[type="text"], input[type="range"], input[type="color"] {
    padding: 10px 14px;
    border-radius: 8px;
    border: 1px solid #444;
    background: #2e2e44;
    color: white;
    font-size: 1rem;
  }

  select:focus, input:focus {
    outline: none;
    border-color: #ff6b6b;
    box-shadow: 0 0 0 3px rgba(255,107,107,0.3);
  }

  .preview {
    position: relative;
    background: #000;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    aspect-ratio: 1 / 1;
    max-height: 580px;
  }

  .preview img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    image-rendering: crisp-edges;
  }

  .text {
    position: absolute;
    color: white;
    font-weight: bold;
    text-shadow: 3px 3px 0 #000, -3px -3px 0 #000, 3px -3px 0 #000, -3px 3px 0 #000;
    pointer-events: none;
    user-select: none;
    white-space: pre-wrap;
    overflow: hidden;
  }

  .btn-group {
    display: flex;
    gap: 12px;
    margin-top: 20px;
    flex-wrap: wrap;
  }

  button {
    padding: 12px 24px;
    font-size: 1.1rem;
    font-weight: bold;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-primary {
    background: #ff6b6b;
    color: white;
  }

  .btn-primary:hover {
    background: #ff5252;
    transform: translateY(-2px);
  }

  .btn-secondary {
    background: #4ecdc4;
    color: white;
  }

  .btn-secondary:hover {
    background: #45b7a7;
  }

  .btn-download {
    background: #51cf66;
    color: white;
  }

  .btn-download:hover {
    background: #40c057;
  }

  @media (max-width: 900px) {
    .editor {
      grid-template-columns: 1fr;
    }
    .preview {
      aspect-ratio: 4 / 5;
      max-height: 500px;
    }
  }
</style>
</head>
<body>

<div class="container">
  <h1>Troll Image Generator 3000</h1>

  <div class="editor">
    <div class="controls">

      <div class="control-group">
        <label>Chọn ảnh nền troll:</label>
        <select id="template">
          <option value="https://i.imgur.com/8M7jC4v.jpeg">Troll Face Classic</option>
          <option value="https://i.imgur.com/3tY0Z8L.jpg">Change My Mind</option>
          <option value="https://i.imgur.com/Qf0vKxW.jpg">Distracted Boyfriend</option>
          <option value="https://i.imgur.com/9kPqL8m.jpg">Drake Hotline Bling</option>
          <option value="https://i.imgur.com/2vZ6KxL.jpg">This is Fine Dog</option>
          <option value="https://i.imgur.com/7jN3vKx.png">SpongeBob Mocking</option>
        </select>
      </div>

      <div class="control-group">
        <label>Dòng chữ trên (to, to, to...):</label>
        <input type="text" id="topText" placeholder="NHỮNG NGƯỜI..." value="TÔI KHI">
      </div>

      <div class="control-group">
        <label>Dòng chữ dưới (nhấn mạnh cái này):</label>
        <input type="text" id="bottomText" placeholder="..." value="CÒN ĐANG ĐỘC THÂN">
      </div>

      <div class="control-group">
        <label>Kích thước chữ:</label>
        <input type="range" id="fontSize" min="20" max="120" value="60">
        <span id="fontSizeValue">60px</span>
      </div>

      <div class="btn-group">
        <button class="btn-primary" onclick="updatePreview()">Cập nhật ngay</button>
        <button class="btn-download" onclick="downloadImage()">Tải ảnh về máy</button>
      </div>

    </div>

    <div class="preview" id="previewArea">
      <img id="baseImage" src="https://i.imgur.com/8M7jC4v.jpeg" alt="troll template">
      <div class="text" id="textTop" style="top:10%; left:0; right:0; font-size:60px;">TÔI KHI</div>
      <div class="text" id="textBottom" style="bottom:10%; left:0; right:0; font-size:60px;">CÒN ĐANG ĐỘC THÂN</div>
    </div>
  </div>
</div>

<script>
const topText = document.getElementById('topText');
const bottomText = document.getElementById('bottomText');
const templateSelect = document.getElementById('template');
const fontSizeSlider = document.getElementById('fontSize');
const fontSizeValue = document.getElementById('fontSizeValue');

const baseImage = document.getElementById('baseImage');
const textTop = document.getElementById('textTop');
const textBottom = document.getElementById('textBottom');

function updatePreview() {
  baseImage.src = templateSelect.value;
  
  textTop.textContent = topText.value.toUpperCase();
  textBottom.textContent = bottomText.value.toUpperCase();
  
  const size = fontSizeSlider.value + 'px';
  textTop.style.fontSize = size;
  textBottom.style.fontSize = size;
  
  fontSizeValue.textContent = size;
}

// Tự động cập nhật khi gõ
topText.addEventListener('input', updatePreview);
bottomText.addEventListener('input', updatePreview);
templateSelect.addEventListener('change', updatePreview);
fontSizeSlider.addEventListener('input', updatePreview);

// Tải ảnh về
function downloadImage() {
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  
  const img = document.getElementById('baseImage');
  canvas.width = img.naturalWidth;
  canvas.height = img.naturalHeight;
  
  ctx.drawImage(img, 0, 0);
  
  // Vẽ text top
  ctx.font = `${fontSizeSlider.value}px Impact, Arial`;
  ctx.fillStyle = 'white';
  ctx.strokeStyle = 'black';
  ctx.lineWidth = 8;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  
  const topY = canvas.height * 0.15;
  ctx.strokeText(topText.value.toUpperCase(), canvas.width/2, topY);
  ctx.fillText(topText.value.toUpperCase(), canvas.width/2, topY);
  
  // Vẽ text bottom
  const bottomY = canvas.height * 0.85;
  ctx.strokeText(bottomText.value.toUpperCase(), canvas.width/2, bottomY);
  ctx.fillText(bottomText.value.toUpperCase(), canvas.width/2, bottomY);
  
  // Tải xuống
  const link = document.createElement('a');
  link.download = 'troll-masterpiece.png';
  link.href = canvas.toDataURL('image/png');
  link.click();
}

// Load lần đầu
updatePreview();
</script>
</body>
</html>
